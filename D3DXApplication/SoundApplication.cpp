///////////////////////////////////////////////////////////////////////////////
//
// SoundApplication.cpp
//  
// 4DClass Developer
// Copyright (c) 4DClass. All rights reserved.
//
///////////////////////////////////////////////////////////////////////////////

#include "SoundApplication.h"

///////////////////////////////////////////////////////////////////////////////
//
// Including
//
///////////////////////////////////////////////////////////////////////////////

#include "SDKmisc.h"
#include "SDKsound.h"

///////////////////////////////////////////////////////////////////////////////
//
// Definition
//
///////////////////////////////////////////////////////////////////////////////

#define MANAGER_INSTANCE(p)									((CSoundManager *)(p))

///////////////////////////////////////////////////////////////////////////////
//
// CSoundApplication
//
// Default construction.
//
///////////////////////////////////////////////////////////////////////////////

CSoundApplication::CSoundApplication(void)
{
	//Create sound manager.
	soundManager = new CSoundManager();
#ifdef _DEBUG
	assert(soundManager != _NULL);
#endif
}

///////////////////////////////////////////////////////////////////////////////
//
// ~CSoundApplication
//
// Default deconstruction.
//
///////////////////////////////////////////////////////////////////////////////

CSoundApplication::~CSoundApplication(void)
{
	//Check sound manager.
	if(soundManager != _NULL)
	{
		//Delete sound manager.
		delete (CSoundManager *)soundManager;
		//Clear sound manager.
		soundManager = (CSoundManager *)_NULL;
	}
}

///////////////////////////////////////////////////////////////////////////////
//
// InitializeSounds
//
///////////////////////////////////////////////////////////////////////////////

void CSoundApplication::initializeSounds()
{
    // Initialize sound after we have the window
    WCHAR wszFileName[MAX_PATH];

#ifdef _DEBUG
	assert(soundManager != _NULL);
#endif
	//Initialize.
    MANAGER_INSTANCE(soundManager)->Initialize(DXUTGetHWND(),DSSCL_PRIORITY);
	//Find media file.
    DXUTFindDXSDKMediaFileCch(wszFileName,MAX_PATH,L"Misc\\Sound\\bounce.wav");
	
	///////////////////////////////////////
	//
	// Load sound for objects.
	//
	///////////////////////////////////////
	/*
    for(_INTEGER i = 0;i < count;a ++)
    {
		//Create sound.
        MANAGER_INSTANCE(soundManager)->Create(&objects[i].sound,wszFileName,DSBCAPS_CTRLVOLUME);
    }
	*/
}
